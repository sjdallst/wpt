<!doctype html>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="/resources/testdriver.js"></script>
<script src="/resources/testdriver-vendor.js"></script>
<body>
<script>
function runStartEndTest(t, utterance) {
  test_driver.bless('speechSynthesis.speak', t.step_func(() => {
    utterance.onerror = t.unreached_func('error event');
    speechSynthesis.speak(utterance);
    utterance.onstart = t.step_func(() => {
      utterance.onend = t.step_func_done();
    });
  }));
}
async_test(t => {
  const utterance = new SpeechSynthesisUtterance();
  runStartEndTest(t, utterance);
}, 'speechSynthesis.speak() fires start and end events with empty utterance');
async_test(t => {
  const utterance = new SpeechSynthesisUtterance('test');
  runStartEndTest(t, utterance);
}, 'speechSynthesis.speak() fires start and end events');
</script>
